sap.ui.define(["sap/ui/core/mvc/Controller","../../utils/Formatter","sap/fhir/model/r4/FHIRFilter","sap/fhir/model/r4/FHIRFilterType","sap/fhir/model/r4/FHIRFilterOperator"],function(e,t,i,n,a){"use strict";return e.extend("myhealthapp.SharedBlocks.insurance.InsuranceBlockController",{formatter:t,onInit:function(){this.initializeRouter();var e=function(t){var i=t.getSource();var n=i.getBindingContext();if(n){var a=n.getPath().split("/")[2];this.filterInsuranceTableToPatient(a);i.detachModelContextChange(e)}};this.getView().byId("insuranceTable").attachModelContextChange(e.bind(this))},initializeRouter:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getRoute("patientRoute").attachPatternMatched(this.onPatientRouteMatched,this)},onPatientRouteMatched:function(e){var t=e.getParameter("arguments").patientId;this.filterInsuranceTableToPatient(t)},filterInsuranceTableToPatient:function(e){var t=[];t.push(new i({path:"patient",operator:a.EQ,value1:"Patient/"+e,valueType:n.string}));this.getView().byId("insuranceTable").getBinding("items").filter(t)},addInsurance:function(){var e=this.byId("insuranceTable").getBindingContext().getPath().split("/")[2];var t=this.getView().getModel().create("Coverage",{beneficiary:{reference:"Patient/"+e}},"patientDetails")},onInsuranceChange:function(e){var t=e.getSource();var i=t.getSelectedKey();var n=this.getView().getModel().getProperty(t.getBindingContext().getPath()+"/id");if(i&&n){this.getView().getModel().setProperty("/Coverage/"+n+"/payor/0/reference","Organization/"+i)}},onInsuranceCompanyModelChange:function(e){var t=e.getSource();var i=t.getBindingContext();if(i){var n=this.getView().getModel().getProperty(i.getPath()+"/id");t.setSelectedKey(this.getView().getModel().getProperty("/Coverage/"+n+"/payor/0/reference/id"))}}})});
//# sourceMappingURL=InsuranceBlockController.controller.js.map