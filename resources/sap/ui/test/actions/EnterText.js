/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/test/actions/Action","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery"],function(t,e,r){"use strict";var i=t.extend("sap.ui.test.actions.EnterText",{metadata:{properties:{text:{type:"string"},clearTextFirst:{type:"boolean",defaultValue:true},keepFocus:{type:"boolean",defaultValue:false},pressEnterKey:{type:"boolean",defaultValue:false}},publicMethods:["executeOn"]},init:function(){t.prototype.init.apply(this,arguments);this.controlAdapters=r.extend(this.controlAdapters,i.controlAdapters)},executeOn:function(t){var r=this.$(t),i=r[0];if(!i){return}if(this.getText()===undefined||!this.getClearTextFirst()&&!this.getText()){this.oLogger.error("Please provide a text for this EnterText action");return}var s=this.getUtils();this.oLogger.timestamp("opa.actions.enterText");this.oLogger.debug("Enter text in control "+t);this._tryOrSimulateFocusin(r,t);if(this.getClearTextFirst()){s.triggerKeydown(i,e.DELETE);s.triggerKeyup(i,e.DELETE);r.val("");s.triggerEvent("input",i)}var n=r.val();this.getText().split("").forEach(function(t){n+=t;s.triggerCharacterInput(i,t,n);s.triggerEvent("input",i)});if(this.getPressEnterKey()){s.triggerKeydown(i,e.ENTER);s.triggerKeyup(i,e.ENTER);s.triggerEvent("input",i);s.triggerEvent("search",i)}else if(!this.getKeepFocus()){this._simulateFocusout(i);s.triggerEvent("search",i)}}});i.controlAdapters={};i.controlAdapters["sap.m.StepInput"]="input-inner";return i});