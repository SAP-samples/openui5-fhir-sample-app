/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/test/matchers/Matcher"],function(t){"use strict";return t.extend("sap.ui.test.matchers.BindingPath",{metadata:{publicMethods:["isMatching"],properties:{path:{type:"string"},modelName:{type:"string"},propertyPath:{type:"string"}}},isMatching:function(t){var o=this.getModelName()||undefined;var r=this.getPropertyPath();var i=this.getPath();if(!i&&!r){this._oLogger.debug("Matcher requires context path or property path but none is defined! No controls will be matched");return false}var n=true;var a=true;var h=t.mObjectBindingInfos&&t.mObjectBindingInfos[o];var s=t.getBindingContext(o);if(i){if(h){var g=e(i,o);n=h.path===g;if(n){this._oLogger.debug("Control '"+t+"' has object binding with the expected context path '"+g+"' for model '"+o+"'")}else{this._oLogger.debug("Control '"+t+"' has object binding with context path '"+h.path+"' for model '"+o+"' but should have context path '"+g+"'")}}else{n=!!s&&s.getPath()===i;if(n){this._oLogger.debug("Control '"+t+"' has binding context with the expected path '"+i+"' for model '"+o+"'")}else if(s){this._oLogger.debug("Control '"+t+"' has binding context with path '"+s.getPath()+"' for model '"+o+"' but should have context path '"+i+"'")}else{this._oLogger.debug("Control '"+t+"' does not have a binding context for model '"+o+"' but should have a binding context with path '"+i+"'")}}}if(r){var d=e(r,o,s);var p=[];var u=Object.keys(t.mBindingInfos).filter(function(e){var r=t.mBindingInfos[e];var i=r.parts?r.parts:[r];var n=i.filter(function(t){var e=t.path===d;var r=h||t.model===o;if(!e&&r){p.push(t.path)}return e&&r});return!!n.length});a=!!u.length;if(a){this._oLogger.debug("Control '"+t+"' has the expected binding property path '"+r+"' for model '"+o+"'")}else if(p.length){this._oLogger.debug("Control '"+t+"' has binding property paths ['"+p.join("', '")+"'] for model '"+o+"' but should have binding property path '"+d+"'")}else{this._oLogger.debug("Control '"+t+"' has no binding property paths for model '"+o+"' but should have binding property path '"+d+"'")}}return n&&a}});function e(t,e,o){var r="/";var i=t;if(e||o){if(t.charAt(0)===r){i=t.substring(1)}}else if(t.charAt(0)!==r){i=r+t}return i}});