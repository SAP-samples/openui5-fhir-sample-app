/*
 * UnicodeNormalizer 1.0.0
 * Copyright (c) 2008 Matsuza
 * Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses.
 * $Date: 2008-06-05 16:44:17 +0200 (Thu, 05 Jun 2008) $
 * $Rev: 13309 $
 */
(function(){var DEFAULT_FEATURE=[null,0,{}];var CACHE_THRESHOLD=10;var SBase=44032,LBase=4352,VBase=4449,TBase=4519,LCount=19,VCount=21,TCount=28;var NCount=VCount*TCount;var SCount=LCount*NCount;var UChar=function(t,r){this.codepoint=t;this.feature=r};UChar.fromCharCode=function(cp,needFeature){var ctx=arguments.callee;function fromCache(t,r,e){if(!ctx.cache){ctx.cache={};ctx.counter=[];for(var a=0;a<=255;++a){ctx.counter[a]=0}}var n=ctx.cache[r];if(!n){n=t(r,e);if(!!n.feature&&++ctx.counter[r>>8&255]>CACHE_THRESHOLD){ctx.cache[r]=n}}return n}function fromData(next,cp,needFeature){var hash=cp&65280;var dunit=UChar.udata[hash];if(dunit==null){dunit=UChar.udata[hash]={}}else if(typeof dunit=="string"){dunit=UChar.udata[hash]=eval("("+dunit+")")}var f=dunit[cp];return f?new UChar(cp,f):new UChar(cp,DEFAULT_FEATURE)}function fromCpOnly(t,r,e){return!!e?t(r,e):new UChar(r,null)}function fromRuleBasedJamo(t,r,e){if(r<LBase||LBase+LCount<=r&&r<SBase||SBase+SCount<r){return t(r,e)}if(LBase<=r&&r<LBase+LCount){var a={};var n=(r-LBase)*VCount;for(var o=0;o<VCount;++o){a[VBase+o]=SBase+TCount*(o+n)}return new UChar(r,[,,a])}var s=r-SBase;var i=s%TCount;var u=[];if(i!=0){u[0]=[SBase+s-i,TBase+i]}else{u[0]=[LBase+Math.floor(s/NCount),VBase+Math.floor(s%NCount/TCount)];u[2]={};for(var o=1;o<TCount;++o){u[2][TBase+o]=r+o}}return new UChar(r,u)}function fromCpFilter(t,r,e){return r<60||13311<r&&r<42607?new UChar(r,DEFAULT_FEATURE):t(r,e)}if(!ctx.strategy){var strategies=[fromCpFilter,fromCache,fromCpOnly,fromRuleBasedJamo,fromData];UChar.fromCharCode.strategy=null;while(strategies.length>0){ctx.strategy=function(t,r,e,a){return function(e,a){return r(t,e,a)}}(ctx.strategy,strategies.pop(),cp,needFeature)}}return ctx.strategy(cp,needFeature)};UChar.isHighSurrogate=function(t){return t>=55296&&t<=56319};UChar.isLowSurrogate=function(t){return t>=56320&&t<=57343};UChar.prototype.prepFeature=function(){if(!this.feature){this.feature=UChar.fromCharCode(this.codepoint,true).feature}};UChar.prototype.toString=function(){if(this.codepoint<65536){return String.fromCharCode(this.codepoint)}else{var t=this.codepoint-65536;return String.fromCharCode(Math.floor(t/1024)+55296,t%1024+56320)}};UChar.prototype.getDecomp=function(){this.prepFeature();return this.feature[0]||null};UChar.prototype.isCompatibility=function(){this.prepFeature();return!!this.feature[1]&&this.feature[1]&1<<8};UChar.prototype.isExclude=function(){this.prepFeature();return!!this.feature[1]&&this.feature[1]&1<<9};UChar.prototype.getCanonicalClass=function(){this.prepFeature();return!!this.feature[1]?this.feature[1]&255:0};UChar.prototype.getComposite=function(t){this.prepFeature();if(!this.feature[2]){return null}var r=this.feature[2][t.codepoint];return r!=null?UChar.fromCharCode(r):null};var UCharIterator=function(t){this.str=t;this.cursor=0};UCharIterator.prototype.next=function(){if(!!this.str&&this.cursor<this.str.length){var t=this.str.charCodeAt(this.cursor++);var r;if(UChar.isHighSurrogate(t)&&this.cursor<this.str.length&&UChar.isLowSurrogate(r=this.str.charCodeAt(this.cursor))){t=(t-55296)*1024+(r-56320)+65536;++this.cursor}return UChar.fromCharCode(t)}else{this.str=null;return null}};var RecursDecompIterator=function(t,r){this.it=t;this.canonical=r;this.resBuf=[]};RecursDecompIterator.prototype.next=function(){function t(r,e){var a=e.getDecomp();if(!!a&&!(r&&e.isCompatibility())){var n=[];for(var o=0;o<a.length;++o){var s=t(r,UChar.fromCharCode(a[o]));for(var i=0;i<s.length;++i){n.push(s[i])}}return n}else{return[e]}}if(this.resBuf.length==0){var r=this.it.next();if(!r){return null}this.resBuf=t(this.canonical,r)}return this.resBuf.shift()};var DecompIterator=function(t){this.it=t;this.resBuf=[]};DecompIterator.prototype.next=function(){var t;if(this.resBuf.length==0){do{var r=this.it.next();if(!r){break}t=r.getCanonicalClass();var e=this.resBuf.length;if(t!=0){for(;e>0;--e){var a=this.resBuf[e-1];var n=a.getCanonicalClass();if(n<=t){break}}}this.resBuf.splice(e,0,r)}while(t!=0)}return this.resBuf.shift()};var CompIterator=function(t){this.it=t;this.procBuf=[];this.resBuf=[];this.lastClass=null};CompIterator.prototype.next=function(){while(this.resBuf.length==0){var t=this.it.next();if(!t){this.resBuf=this.procBuf;this.procBuf=[];break}if(this.procBuf.length==0){this.lastClass=t.getCanonicalClass();this.procBuf.push(t)}else{var r=this.procBuf[0];var e=r.getComposite(t);var a=t.getCanonicalClass();if(!!e&&(this.lastClass<a||this.lastClass==0)){this.procBuf[0]=e}else{if(a==0){this.resBuf=this.procBuf;this.procBuf=[]}this.lastClass=a;this.procBuf.push(t)}}}return this.resBuf.shift()};var createIterator=function(t,r){switch(t){case"NFD":return new DecompIterator(new RecursDecompIterator(new UCharIterator(r),true));case"NFKD":return new DecompIterator(new RecursDecompIterator(new UCharIterator(r),false));case"NFC":return new CompIterator(new DecompIterator(new RecursDecompIterator(new UCharIterator(r),true)));case"NFKC":return new CompIterator(new DecompIterator(new RecursDecompIterator(new UCharIterator(r),false)))}throw t+" is invalid"};var normalize=function(t,r){var e=createIterator(t,r);var a="";var n;while(!!(n=e.next())){a+=n.toString()}return a};var nfd=function(t){return normalize("NFD",t)};var nfkd=function(t){return normalize("NFKD",t)};var nfc=function(t){return normalize("NFC",t)};var nfkc=function(t){return normalize("NFKC",t)};this.UNorm=this.UNorm||{};var ns=this.UNorm;ns.UChar=UChar;ns.normalize=normalize;ns.createIterator=createIterator;ns.nfd=nfd;ns.nfkd=nfkd;ns.nfc=nfc;ns.nfkc=nfkc})();