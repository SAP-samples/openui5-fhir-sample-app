/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/Device","sap/ui/Global","sap/ui/base/BindingParser","sap/ui/base/DataType","sap/ui/base/EventProvider","sap/ui/base/Interface","sap/ui/base/Object","sap/ui/base/ManagedObject","sap/ui/performance/trace/Interaction","./Component","./Configuration","./Control","./Element","./ElementMetadata","./FocusHandler","./RenderManager","./ResizeHandler","./ThemeCheck","./UIArea","./message/MessageManager","sap/ui/util/ActivityDetection","sap/ui/dom/getScrollbarSize","sap/base/i18n/ResourceBundle","sap/base/Log","sap/ui/performance/Measurement","sap/ui/security/FrameOptions","sap/base/assert","sap/ui/dom/includeStylesheet","sap/base/util/ObjectPath","sap/base/util/Version","sap/base/util/array/uniqueSort","sap/base/util/uid","sap/ui/performance/trace/initTraces","sap/base/util/LoaderExtensions","sap/base/util/isEmptyObject","sap/base/util/each","sap/ui/VersionInfo","sap/ui/events/jquery/EventSimulation"],function(jQuery,Device,Global,BindingParser,DataType,EventProvider,Interface,BaseObject,ManagedObject,Interaction,Component,Configuration,Control,Element,ElementMetadata,FocusHandler,RenderManager,ResizeHandler,ThemeCheck,UIArea,MessageManager,ActivityDetection,getScrollbarSize,ResourceBundle,Log,Measurement,FrameOptions,assert,includeStylesheet,ObjectPath,Version,uniqueSort,uid,initTraces,LoaderExtensions,isEmptyObject,each,VersionInfo){"use strict";function globalEval(){eval(arguments[0])}if(sap.ui.getCore&&sap.ui.getCore()){return sap.ui.getCore()}initTraces();var oRenderLog=UIArea._oRenderLog;var mLoadedLibraries={};var mLibraryPreloadBundles={};var _oEventProvider;var SyncPoint=function(e,t){var r=[],o=0,n=0;this.startTask=function(e){var t=r.length;r[t]={name:e,finished:false};o++;return t};this.finishTask=function(t,a){if(!r[t]||r[t].finished){throw new Error("trying to finish non existing or already finished task")}r[t].finished=true;o--;if(a===false){n++}if(o===0){Log.info("Sync point '"+e+"' finished (tasks:"+r.length+", open:"+o+", failures:"+n+")");i()}};function i(){if(t){t(o,n)}t=null}Log.info("Sync point '"+e+"' created")};var Core=BaseObject.extend("sap.ui.core.Core",{constructor:function(){var e=this,t="sap.ui.core.Core";if(sap.ui.getCore&&sap.ui.getCore()){Log.error("Only the framework must create an instance of sap/ui/core/Core."+" To get access to its functionality, use sap.ui.getCore().");return sap.ui.getCore()}BaseObject.call(this);_oEventProvider=new EventProvider;["attachEvent","detachEvent","getEventingParent"].forEach(function(e){Core.prototype[e]=_oEventProvider[e].bind(_oEventProvider)});this.bBooted=false;this.bInitialized=false;this.bDomReady=false;this.aPlugins=[];this.mLibraries={};this.mResourceBundles={};this.mUIAreas={};this.oModels={};this.oEventBus=null;Object.defineProperty(this,"mElements",{get:function(){Log.error("oCore.mElements was a private member and has been removed. Use one of the methods in sap.ui.core.Element.registry instead");return Element.registry.all()},configurable:false});this.mObjects={template:{}};this.oRootComponent=null;this.aInitListeners=[];this.bInitLegacyLib=false;this._sRerenderTimer=this;this.aPrerenderingTasks=[];Log.info("Creating Core",null,t);Measurement.start("coreComplete","Core.js - complete");Measurement.start("coreBoot","Core.js - boot");Measurement.start("coreInit","Core.js - init");this.oConfiguration=new Configuration(this);var r=this.oConfiguration["frameOptionsConfig"]||{};r.mode=this.oConfiguration.getFrameOptions();r.whitelistService=this.oConfiguration.getWhitelistService();this.oFrameOptions=new FrameOptions(r);if(this.oConfiguration["bindingSyntax"]==="complex"){ManagedObject.bindingParser=BindingParser.complexParser}if(this.oConfiguration["xx-designMode"]==true){BindingParser._keepBindingStrings=true}this._grantFriendAccess();var o=this.oConfiguration.modules;if(this.oConfiguration.getDebug()){o.unshift("sap.ui.debug.DebugEnv")}var n=o.indexOf("sap.ui.core.library");if(n!=0){if(n>0){o.splice(n,1)}o.unshift("sap.ui.core.library")}if(this.oConfiguration["xx-lesssupport"]&&o.indexOf("sap.ui.core.plugin.LessSupport")==-1){Log.info("Including LessSupport into declared modules");o.push("sap.ui.core.plugin.LessSupport")}var i=this.oConfiguration.preload;if(window["sap-ui-debug"]===true){i=""}if(i==="auto"){if(window["sap-ui-optimized"]){i=sap.ui.loader.config().async?"async":"sync"}else{i=""}}this.oConfiguration.preload=i;var a=i==="async"||sap.ui.loader.config().async;this.oConfiguration["xx-libraryPreloadFiles"].forEach(function(e){var t=String(e).trim().split(/\s*:\s*/),r=t[0],o=t[1];if(t.length===1){o=r;r=""}if(/^(?:none|js|json|both)$/.test(o)){mLibraryPreloadFileTypes[r]=o}});Log.info("Declared modules: "+o,t);this._setupThemes();this._setupContentDirection();this._setupBrowser();this._setupOS();this._setupLang();this._setupAnimation();sap.ui.getCore=function(){return e.getInterface()};this.oRenderManager=new RenderManager;var s=new SyncPoint("UI5 Document Ready",function(t,r){e.bDomReady=true;e.init()});var u=s.startTask("document.ready");var d=s.startTask("preload and boot");var c=function(){Log.trace("document is ready");s.finishTask(u);document.removeEventListener("DOMContentLoaded",c)};if(document.readyState!=="loading"){c()}else{document.addEventListener("DOMContentLoaded",c)}var l=new SyncPoint("UI5 Core Preloads and Bootstrap Script",function(t,r){Log.trace("Core loaded: open="+t+", failures="+r);e._boot(a,function(){s.finishTask(d);Measurement.end("coreBoot")})});var p=l.startTask("create sp2 tasks task");if(this.oConfiguration["versionedLibCss"]){var f=l.startTask("load version info");var h=function(e){if(e){Log.trace('Loaded "sap-ui-version.json".')}else{Log.error('Could not load "sap-ui-version.json".')}l.finishTask(f)};var g=sap.ui.getVersionInfo({async:a,failOnError:false});if(g instanceof Promise){g.then(h,function(e){Log.error('Unexpected error when loading "sap-ui-version.json": '+e);l.finishTask(f)})}else{h(g)}}var m=this.oConfiguration["xx-bootTask"];if(m){var y=l.startTask("custom boot task");m(function(e){l.finishTask(y,typeof e==="undefined"||e===true)})}this._polyfillFlexbox();var C=l.startTask("bootstrap script");this.boot=function(){if(this.bBooted){return}this.bBooted=true;l.finishTask(C)};if(i==="sync"||i==="async"){var v=o.reduce(function(e,t){var r=t.search(/\.library$/);if(r>=0){e.push(t.slice(0,r))}return e},[]);var b=this.loadLibraries(v,{async:a,preloadOnly:true});if(a){var E=l.startTask("preload bootstrap libraries");b.then(function(){l.finishTask(E)},function(){l.finishTask(E,false)})}}var T=this.oConfiguration.getAppCacheBuster();if(T&&T.length>0){var L=sap.ui.requireSync("sap/ui/core/AppCacheBuster");L.boot(l)}if(this.oConfiguration.getSupportMode()!==null){var _=l.startTask("support info script");var I=function(t,r){t.initializeSupportMode(e.oConfiguration.getSupportMode(),a);r.initSupportRules(e.oConfiguration.getSupportMode());l.finishTask(_)};if(a){sap.ui.require(["sap/ui/core/support/Support","sap/ui/support/Bootstrap"],I,function(e){Log.error("Could not load support mode modules:",e)})}else{Log.warning("Synchronous loading of Support mode. Set preload configuration to 'async' or switch to asynchronous bootstrap to prevent these synchronous request.","SyncXHR",null,function(){return{type:"SyncXHR",name:"support-mode"}});I(sap.ui.requireSync("sap/ui/core/support/Support"),sap.ui.requireSync("sap/ui/support/Bootstrap"))}}if(this.oConfiguration.getTestRecorderMode()!==null){var S=l.startTask("test recorder script");var P=function(t){t.init(e.oConfiguration.getTestRecorderMode());l.finishTask(S)};if(a){sap.ui.require(["sap/ui/testrecorder/Bootstrap"],P,function(e){Log.error("Could not load test recorder:",e)})}else{Log.warning("Synchronous loading of Test recorder mode. Set preload configuration to 'async' or switch to asynchronous bootstrap to prevent these synchronous request.","SyncXHR",null,function(){return{type:"SyncXHR",name:"test-recorder-mode"}});P(sap.ui.requireSync("sap/ui/testrecorder/Bootstrap"))}}l.finishTask(p)},metadata:{publicMethods:["boot","isInitialized","isThemeApplied","attachInitEvent","attachInit","getRenderManager","createRenderManager","getConfiguration","setRoot","createUIArea","getUIArea","getUIDirty","getElementById","getCurrentFocusedControlId","getControl","getComponent","getTemplate","lock","unlock","isLocked","attachEvent","detachEvent","applyChanges","getEventBus","applyTheme","setThemeRoot","attachThemeChanged","detachThemeChanged","getStaticAreaRef","attachThemeScopingChanged","detachThemeScopingChanged","fireThemeScopingChanged","notifyContentDensityChanged","registerPlugin","unregisterPlugin","getLibraryResourceBundle","byId","getLoadedLibraries","loadLibrary","loadLibraries","initLibrary","includeLibraryTheme","setModel","getModel","hasModel","isMobile","attachControlEvent","detachControlEvent","attachIntervalTimer","detachIntervalTimer","attachParseError","detachParseError","fireParseError","attachValidationError","detachValidationError","fireValidationError","attachFormatError","detachFormatError","fireFormatError","attachValidationSuccess","detachValidationSuccess","fireValidationSuccess","attachLocalizationChanged","detachLocalizationChanged","attachLibraryChanged","detachLibraryChanged","isStaticAreaRef","createComponent","getRootComponent","getApplication","setMessageManager","getMessageManager","byFieldGroupId","addPrerenderingTask"]}});Core.M_EVENTS={ControlEvent:"ControlEvent",UIUpdated:"UIUpdated",ThemeChanged:"ThemeChanged",ThemeScopingChanged:"themeScopingChanged",LocalizationChanged:"localizationChanged",LibraryChanged:"libraryChanged",ValidationError:"validationError",ParseError:"parseError",FormatError:"formatError",ValidationSuccess:"validationSuccess"};var STATIC_UIAREA_ID="sap-ui-static";Core.aFnDone=[];Core.prototype._grantFriendAccess=function(){var e=this;ElementMetadata.prototype.register=function(t){e.registerElementClass(t)};Element._updateFocusInfo=function(t){if(e.oFocusHandler){e.oFocusHandler.updateControlFocusInfo(t)}}};Core.prototype._setupThemes=function(){var e="sap.ui.core.Core";var t=window["sap-ui-config"];if(this.oConfiguration.themeRoot){t=t||{};t.themeroots=t.themeroots||{};t.themeroots[this.oConfiguration.getTheme()]=this.oConfiguration.themeRoot}if(t){if(t.themeroots){for(var r in t.themeroots){var o=t.themeroots[r];if(typeof o==="string"){this.setThemeRoot(r,o)}else{for(var n in o){if(n.length>0){this.setThemeRoot(r,[n],o[n])}else{this.setThemeRoot(r,o[n])}}}}}}this.sTheme=this.oConfiguration.getTheme();document.documentElement.classList.add("sapUiTheme-"+this.sTheme);Log.info("Declared theme "+this.sTheme,null,e)};Core.prototype._setupContentDirection=function(){var e="sap.ui.core.Core",t=this.oConfiguration.getRTL()?"rtl":"ltr";document.documentElement.setAttribute("dir",t);Log.info("Content direction set to '"+t+"'",null,e)};Core.prototype._setupBrowser=function(){var e="sap.ui.core.Core";var t=document.documentElement;var r=Device.browser;var o=r.name;if(o){if(o===r.BROWSER.SAFARI&&r.mobile){o="m"+o}o=o+(r.version===-1?"":Math.floor(r.version));t.dataset.sapUiBrowser=o;Log.debug("Browser-Id: "+o,null,e)}};Core.prototype._setupOS=function(e){var e=document.documentElement;e.dataset.sapUiOs=Device.os.name+Device.os.versionStr;var t=null;switch(Device.os.name){case Device.os.OS.IOS:t="sap-ios";break;case Device.os.OS.ANDROID:t="sap-android";break;case Device.os.OS.BLACKBERRY:t="sap-bb";break;case Device.os.OS.WINDOWS_PHONE:t="sap-winphone";break}if(t){e.classList.add(t)}};Core.prototype._setupLang=function(){var e=document.documentElement;var t=function(){var t=this.oConfiguration.getLocale();t?e.setAttribute("lang",t.toString()):e.removeAttribute("lang")};t.call(this);this.attachLocalizationChanged(t,this)};Core.prototype._setupAnimation=function(){if(this.oConfiguration){var e=document.documentElement;var t=this.oConfiguration.getAnimation();e.dataset.sapUiAnimation=t?"on":"off";if(typeof jQuery!=="undefined"){jQuery.fx.off=!t}var r=this.oConfiguration.getAnimationMode();e.dataset.sapUiAnimationMode=r}};Core.prototype._polyfillFlexbox=function(){jQuery.support.useFlexBoxPolyfill=false};Core.prototype._boot=function(e,t){var r=this.oConfiguration["preloadLibCss"];if(r&&r.length>0&&!r.appManaged){this.includeLibraryTheme("sap-ui-merged",undefined,"?l="+r.join(","))}if(e){return this._requireModulesAsync().then(function(){t()})}Log.warning("Modules and libraries declared via bootstrap-configuration are loaded synchronously. Set preload configuration to"+" 'async' or switch to asynchronous bootstrap to prevent these requests.","SyncXHR",null,function(){return{type:"SyncXHR",name:"legacy-module"}});this.oConfiguration.modules.forEach(function(e){var t=e.match(/^(.*)\.library$/);if(t){this.loadLibrary(t[1])}else{sap.ui.requireSync(/^jquery\.sap\./.test(e)?e:e.replace(/\./g,"/"))}}.bind(this));t()};Core.prototype._requireModulesAsync=function(){var e=[],t=[];this.oConfiguration.modules.forEach(function(r){var o=r.match(/^(.*)\.library$/);if(o){e.push(o[1])}else{t.push(/^jquery\.sap\./.test(r)?r:r.replace(/\./g,"/"))}});return Promise.all([this.loadLibraries(e),new Promise(function(e){sap.ui.require(t,function(){e(Array.prototype.slice.call(arguments))})})])};Core.prototype.applyTheme=function(e,t){assert(typeof e==="string","sThemeName must be a string");assert(typeof t==="string"||typeof t==="undefined","sThemeBaseUrl must be a string or undefined");e=this.oConfiguration._normalizeTheme(e,t);if(t){this.setThemeRoot(e,t)}if(e&&this.sTheme!=e){var r=this.sTheme;var o=document.documentElement;this._updateThemeUrls(e,true);this.sTheme=e;this.oConfiguration._setTheme(e);o.classList.remove("sapUiTheme-"+r);o.classList.add("sapUiTheme-"+e);if(this.oThemeCheck){this.oThemeCheck.fireThemeChangedEvent(false)}}};Core.prototype._updateThemeUrl=function(e,t,r){var o,n=e.href.search(/[?#]/),i,a,s="library",u=this.oConfiguration.getRTL()?"-RTL":"",d,c;var l=/^sap-ui-theme(?:skeleton)?-(.*)$/i.exec(e.id);if(Array.isArray(l)){o=l[1]}else{o=e.id.slice(13)}if(n>-1){i=e.href.substring(0,n);a=e.href.substring(n)}else{i=e.href;a=""}i=i.substring(i.lastIndexOf("/")+1);if((c=o.indexOf("-["))>0){s+=o.slice(c+2,-1);o=o.slice(0,c)}if(i===s+".css"||i===s+"-RTL.css"){i=s+u+".css"}d=this._getThemePath(o,t)+i+a;if(d!=e.href){if(r){e.dataset.sapUiFoucmarker=e.id}includeStylesheet(d,e.id)}};Core.prototype._updateThemeUrls=function(e,t){var r=document.querySelectorAll("link[id^=sap-ui-theme-],link[id^=sap-ui-themeskeleton-]");Array.prototype.forEach.call(r,function(r){this._updateThemeUrl(r,e,t)}.bind(this))};Core.prototype._ensureThemeRoot=function(e,t){if(this._mThemeRoots){var r=this._mThemeRoots[t+" "+e]||this._mThemeRoots[t];if(r){r=r+e.replace(/\./g,"/")+"/themes/"+t+"/";registerModulePath(e+".themes."+t,r)}}};Core.prototype._getThemePath=function(e,t){this._ensureThemeRoot(e,t);return getModulePath(e+".themes."+t,"/")};Core.prototype.setThemeRoot=function(e,t,r,o){assert(typeof e==="string","sThemeName must be a string");assert(Array.isArray(t)&&typeof r==="string"||typeof t==="string"&&r===undefined,"either the second parameter must be a string (and the third is undefined), or it must be an array and the third parameter is a string");if(!this._mThemeRoots){this._mThemeRoots={}}if(typeof t==="string"){o=r;r=t;t=undefined}r=r+(r.slice(-1)=="/"?"":"/");if(t){for(var n=0;n<t.length;n++){var i=t[n];this._mThemeRoots[e+" "+i]=r}}else{this._mThemeRoots[e]=r}if(o&&e===this.sTheme){this._updateThemeUrls(this.sTheme)}return this};Core.prototype.init=function(){if(this.bInitialized){return}var e="sap.ui.core.Core.init()";this.boot();Log.info("Initializing",null,e);this.oFocusHandler=new FocusHandler(document.body,this);this.oRenderManager._setFocusHandler(this.oFocusHandler);this.oResizeHandler=new ResizeHandler(this);this.oThemeCheck=new ThemeCheck(this);Log.info("Initialized",null,e);Measurement.end("coreInit");Log.info("Starting Plugins",null,e);this.startPlugins();Log.info("Plugins started",null,e);this._createUIAreas();this._setBodyAccessibilityRole();this.oThemeCheck.fireThemeChangedEvent(true);var t=this.oConfiguration["xx-waitForTheme"];if(this.isThemeApplied()||!t){Core.aFnDone.push(Interaction.notifyAsyncStep());this._executeInitialization();this.renderPendingUIUpdates("during Core init");Measurement.end("coreComplete")}else if(t==="rendering"){Core.aFnDone.push(Interaction.notifyAsyncStep());this._executeInitialization();oRenderLog.debug("delay initial rendering until theme has been loaded");_oEventProvider.attachEventOnce(Core.M_EVENTS.ThemeChanged,function(){setTimeout(this.renderPendingUIUpdates.bind(this,"after theme has been loaded"),Device.browser.safari?50:0)},this);Measurement.end("coreComplete")}else if(t==="init"){oRenderLog.debug("delay init event and initial rendering until theme has been loaded");Core.aFnDone.push(Interaction.notifyAsyncStep());_oEventProvider.attachEventOnce(Core.M_EVENTS.ThemeChanged,function(){this._executeInitialization();setTimeout(this.renderPendingUIUpdates.bind(this,"after theme has been loaded"),Device.browser.safari?50:0);Measurement.end("coreComplete")},this)}};Core.prototype._createUIAreas=function(){var e=this.oConfiguration;if(e.areas){for(var t=0,r=e.areas.length;t<r;t++){this.createUIArea(e.areas[t])}e.areas=undefined}};Core.prototype._executeOnInit=function(){var e=this.oConfiguration.onInit;if(e){if(typeof e==="function"){e()}else if(typeof e==="string"){var t=/^module\:((?:(?:[_$.\-a-zA-Z][_$.\-a-zA-Z0-9]*)\/?)*)$/.exec(e);if(t&&t[1]){setTimeout(sap.ui.require.bind(sap.ui,[t[1]]),0)}else{var r=ObjectPath.get(e);if(typeof r==="function"){r()}else{globalEval(e)}}}this.oConfiguration.onInit=undefined}};Core.prototype._setupRootComponent=function(){var e="sap.ui.core.Core.init()",t=this.oConfiguration;var r=t.getRootComponent();if(r){Log.info("Loading Root Component: "+r,null,e);var o=sap.ui.component({name:r});this.oRootComponent=o;var n=t["xx-rootComponentNode"];if(n&&o.isA("sap.ui.core.UIComponent")){var i=n?document.getElementById(n):null;if(i){Log.info("Creating ComponentContainer for Root Component: "+r,null,e);var a=sap.ui.requireSync("sap/ui/core/ComponentContainer"),s=new a({component:o,propagateModel:true});s.placeAt(i)}}}else{var u=t.getApplication();if(u){Log.warning("The configuration 'application' is deprecated. Please use the configuration 'component' instead! "+"Please migrate from sap.ui.app.Application to sap.ui.core.Component.","SyncXHR",null,function(){return{type:"Deprecation",name:"sap.ui.core"}});Log.info("Loading Application: "+u,null,e);sap.ui.requireSync(u.replace(/\./g,"/"));var d=ObjectPath.get(u);assert(d!==undefined,'The specified application "'+u+'" could not be found!');var c=new d;assert(BaseObject.isA(c,"sap.ui.app.Application"),'The specified application "'+u+'" must be an instance of sap.ui.app.Application!')}}};Core.prototype._setBodyAccessibilityRole=function(){var e=this.oConfiguration,t=document.body;if(e.getAccessibility()&&e.getAutoAriaBodyRole()&&!t.getAttribute("role")){t.setAttribute("role","application")}};Core.prototype._executeInitListeners=function(){var e="sap.ui.core.Core.init()";var t=this.aInitListeners;this.aInitListeners=undefined;if(t&&t.length>0){Log.info("Fire Loaded Event",null,e);t.forEach(function(e){e()})}};Core.prototype._executeInitialization=function(){if(this.bInitialized){return}this.bInitialized=true;this._executeOnInit();this._setupRootComponent();this._executeInitListeners()};Core.prototype.isInitialized=function(){return this.bInitialized};Core.prototype.isThemeApplied=function(){return ThemeCheck.themeLoaded};Core.prototype.attachInitEvent=function(e){assert(typeof e==="function","fnFunction must be a function");if(this.aInitListeners){this.aInitListeners.push(e)}};Core.prototype.attachInit=function(e){assert(typeof e==="function","fnFunction must be a function");if(this.aInitListeners){this.aInitListeners.push(e)}else{e()}};Core.prototype.lock=function(){this.bLocked=true};Core.prototype.unlock=function(){this.bLocked=false};Core.prototype.isLocked=function(){return this.bLocked};Core.prototype.getConfiguration=function(){return this.oConfiguration};Core.prototype.getRenderManager=function(){return this.createRenderManager()};Core.prototype.createRenderManager=function(){assert(this.isInitialized(),"A RenderManager should be created only after the Core has been initialized");var e=new RenderManager;e._setFocusHandler(this.oFocusHandler);return e.getInterface()};Core.prototype.getCurrentFocusedControlId=function(){if(!this.isInitialized()){throw new Error("Core must be initialized")}return this.oFocusHandler.getCurrentFocusedControlId()};var mLibraryPreloadFileTypes={};function evalLibConfig(e){assert(typeof e==="string"&&e||typeof e==="object"&&typeof e.name==="string"&&e.name&&(e.json==null||typeof e.json==="boolean"),"lib must be a non-empty string or an object with at least a non-empty 'name' property and an optional (boolean) property 'json'");var t="both";if(typeof e==="object"){if(e.json===true){t="json"}else if(e.json===false){t="js"}e=e.name}var r=mLibraryPreloadFileTypes[e]||mLibraryPreloadFileTypes[""]||"both";if(r==="both"){r=t}else if(r!==t&&t!=="both"){r="none"}return{name:e,fileType:r}}function preloadLibraryAsync(e){var t=this;e=evalLibConfig(e);var r=e.name,o=e.fileType,n=r.replace(/\./g,"/"),i=this.oConfiguration.getDepCache();if(o==="none"||!!sap.ui.loader._.getModuleState(n+"/library.js")){return Promise.resolve(true)}var a=mLibraryPreloadBundles[r]||(mLibraryPreloadBundles[r]={});if(a.promise){return a.promise}a.pending=true;a.async=true;var s;if(o!=="json"){var u=n+(i?"/library-h2-preload.js":"/library-preload.js");s=sap.ui.loader._.loadJSResourceAsync(u).then(function(){return dependenciesFromManifest(r)},function(e){if(o!=="js"){Log.error("failed to load '"+u+"' ("+(e&&e.message||e)+"), falling back to library-preload.json");return loadJSONAsync(r)}})}else{s=loadJSONAsync(r)}a.promise=s.then(function(e){var o=[],n=getManifest(r);if(e&&e.length){e=VersionInfo._getTransitiveDependencyForLibraries(e);o=e.map(preloadLibraryAsync.bind(t))}if(n&&Version(n._version).compareTo("1.9.0")>=0){o.push(t.getLibraryResourceBundle(r,true))}return Promise.all(o).then(function(){a.pending=false})});return a.promise}var mLibraryManifests=new Map;function getManifest(e){if(mLibraryManifests.has(e)){return mLibraryManifests.get(e)}var t=e.replace(/\./g,"/")+"/manifest.json";if(sap.ui.loader._.getModuleState(t)){var r=LoaderExtensions.loadResource(t,{dataType:"json",async:false,failOnError:false});mLibraryManifests.set(e,r);return r}}function dependenciesFromManifest(e){var t=getManifest(e);var r=t&&t["sap.ui5"]&&t["sap.ui5"].dependencies&&t["sap.ui5"].dependencies.libs;if(r){return Object.keys(r).reduce(function(e,t){if(!r[t].lazy){e.push(t)}return e},[])}}function registerPreloadedModules(e,t){var r=e.modules,o=function(e){return/^jquery\.sap\./.test(e)?e:e.replace(/\./g,"/")};if(Version(e.version||"1.0").compareTo("2.0")<0){r={};for(var n in e.modules){r[o(n)+".js"]=e.modules[n]}}sap.ui.require.preload(r,e.name,t)}function preprocessDependencies(e){if(Array.isArray(e)){return e.map(function(e){return e.replace(/\.library-preload$/,"")})}return e}function loadJSONAsync(e){var t=getModulePath(e,"/library-preload.json");return Promise.resolve(jQuery.ajax({dataType:"json",url:t})).then(function(e){if(e){registerPreloadedModules(e,t);return preprocessDependencies(e.dependencies)}},function(e,r,o){Log.error("failed to load '"+t+"': "+(o||r))})}function preloadLibrarySync(e){e=evalLibConfig(e);var t=e.name,r=e.fileType,o=t.replace(/\./g,"/"),n=!!sap.ui.loader._.getModuleState(o+"/library.js");if(r==="none"||n){return}var i=mLibraryPreloadBundles[t]||(mLibraryPreloadBundles[t]={});if(i.pending===false){return}if(i.pending){if(i.async){Log.warning("request to load "+t+" synchronously while async loading is pending; this causes a duplicate request and should be avoided by caller")}else{Log.warning("request to load "+t+" synchronously while sync loading is pending (cycle, ignored)");return}}i.pending=true;i.async=false;var a;i.promise=new Promise(function(e,t){a=e});var s;if(r!=="json"){var u=o+"/library-preload";try{sap.ui.requireSync(u);s=dependenciesFromManifest(t)}catch(e){Log.error("failed to load '"+u+"' ("+(e&&e.message||e)+")");if(e&&e.loadError&&r!=="js"){s=loadJSONSync(t)}}}else{s=loadJSONSync(t)}if(s&&s.length){s.forEach(preloadLibrarySync)}i.pending=false;a()}function loadJSONSync(e){var t=getModulePath(e,"/library-preload.json");var r;jQuery.ajax({dataType:"json",async:false,url:t,success:function(e){if(e){registerPreloadedModules(e,t);r=e.dependencies}},error:function(e,r,o){Log.error("failed to load '"+t+"': "+(o||r))}});return preprocessDependencies(r)}function getModulePath(e,t){return sap.ui.require.toUrl(e.replace(/\./g,"/")+t)}function registerModulePath(e,t){LoaderExtensions.registerResourcePath(e.replace(/\./g,"/"),t)}Core.prototype.loadLibrary=function(e,t){assert(typeof e==="string","sLibrary must be a string");assert(t===undefined||typeof t==="boolean"||typeof t==="string"||typeof t==="object"&&(t.url==null||typeof t.url==="string")&&(t.async==null||typeof t.async==="boolean"),"vUrl must be empty or a string or an object with an optional property 'url' of type string and an optional boolean property 'async'");if(typeof t==="boolean"){t={async:t}}if(typeof t==="object"){if(t.async){if(t.url&&mLibraryPreloadBundles[e]==null){registerModulePath(e,t.url)}return this.loadLibraries([e])}t=t.url}if(!mLoadedLibraries[e]){var r=e+".library";if(t){registerModulePath(e,t)}if(this.oConfiguration.preload==="sync"||this.oConfiguration.preload==="async"){preloadLibrarySync(e)}sap.ui.requireSync(r.replace(/\./g,"/"));if(!mLoadedLibraries[e]){Log.warning("library "+e+" didn't initialize itself");this.initLibrary(e)}}return this.mLibraries[e]};Core.prototype.loadLibraries=function(e,t){assert(Array.isArray(e),"aLibraries must be an array");t=Object.assign({async:true,preloadOnly:false},t);var r=this.oConfiguration.preload==="sync"||this.oConfiguration.preload==="async",o=t.async,n=!t.preloadOnly;function i(){return e.map(function(e){if(typeof e==="object"){e=e.name}return e.replace(/\./g,"/")+"/library"})}function a(){return new Promise(function(e,t){sap.ui.require(i(),function(){e()},t)})}function s(){i().forEach(sap.ui.requireSync)}if(o){e=VersionInfo._getTransitiveDependencyForLibraries(e);var u=r?Promise.all(e.map(preloadLibraryAsync.bind(this))):Promise.resolve(true);return n?u.then(a):u}else{if(r){e.forEach(preloadLibrarySync)}if(n){s()}}};Core.prototype.createComponent=function(e,t,r,o){if(typeof e==="string"){e={name:e,url:t};if(typeof r==="object"){e.settings=r}else{e.id=r;e.settings=o}}if(e.async&&(e.manifest!==undefined||e.manifestFirst===undefined&&e.manifestUrl===undefined)){if(e.manifest===undefined){e.manifest=false}return Component.create(e)}return sap.ui.component(e)};Core.prototype.getRootComponent=function(){return this.oRootComponent};Core.prototype.initLibrary=function(e){assert(typeof e==="string"||typeof e==="object","oLibInfo must be a string or object");var t=typeof e==="string";if(t){e={name:e}}var r=e.name,o="sap.ui.core.Core.initLibrary()";if(t){Log.error("[Deprecated] library "+r+" uses old fashioned initLibrary() call (rebuild with newest generator)")}if(!r||mLoadedLibraries[r]){return}Log.debug("Analyzing Library "+r,null,o);mLoadedLibraries[r]=true;function n(e,t){var r,o;for(r in t){o=t[r];if(o!==undefined){if(Array.isArray(e[r])){if(e[r].length===0){e[r]=o}else{e[r]=uniqueSort(e[r].concat(o))}}else if(e[r]===undefined){e[r]=o}else if(r!="name"){Log.warning("library info setting ignored: "+r+"="+o)}}}return e}ObjectPath.create(r);this.mLibraries[r]=e=n(this.mLibraries[r]||{name:r,dependencies:[],types:[],interfaces:[],controls:[],elements:[]},e);for(var i=0;i<e.dependencies.length;i++){var a=e.dependencies[i];Log.debug("resolve Dependencies to "+a,null,o);if(mLoadedLibraries[a]!==true){Log.warning("Dependency from "+r+" to "+a+" has not been resolved by library itself",null,o);this.loadLibrary(a)}}DataType.registerInterfaceTypes(e.interfaces);for(var i=0;i<e.types.length;i++){if(!/^(any|boolean|float|int|string|object|void)$/.test(e.types[i])){sap.ui.loader._.declareModule(e.types[i].replace(/\./g,"/")+".js");var s=e.types[i].substring(0,e.types[i].lastIndexOf("."));if(ObjectPath.get(s)===undefined){ObjectPath.create(s)}}}var u=e.controls.concat(e.elements);for(var i=0;i<u.length;i++){sap.ui.lazyRequire(u[i],"new extend getMetadata")}if(!e.noLibraryCSS){this._ensureThemeRoot(r,this.sTheme);this._ensureThemeRoot(r,"base");if(this.oConfiguration["preloadLibCss"].indexOf(r)<0){var d=this._getLibraryCssQueryParams(e);this.includeLibraryTheme(r,undefined,d);if(this.oThemeCheck&&this.isInitialized()){this.oThemeCheck.fireThemeChangedEvent(false)}}}e.sName=e.name;e.aControls=e.controls;this.fireLibraryChanged({name:r,stereotype:"library",operation:"add",metadata:e})};function fnAddFoucmarker(e){var t=document.getElementById(e);if(t){t.dataset.sapUiFoucmarker=e}}Core.prototype.includeLibraryTheme=function(e,t,r){assert(typeof e==="string","sLibName must be a string");assert(t===undefined||typeof t==="string","sVariant must be a string or undefined");if(e!="sap.ui.legacy"&&e!="sap.ui.classic"){if(!t){t=""}var o=/^(true|x)$/i.test(this.oConfiguration["xx-cssVariables"])?"_skeleton":"";var n=this.oConfiguration.getRTL()?"-RTL":"";var i,a=e+(t.length>0?"-["+t+"]":t);if(e&&e.indexOf(":")==-1){i="library"+t+o+n}else{i=e.substring(e.indexOf(":")+1)+t;e=e.substring(0,e.indexOf(":"))}var s="sap-ui-theme-"+a;fnAddFoucmarker(s);var u;if(/^(true|x|additional)$/i.test(this.oConfiguration["xx-cssVariables"])){u=this._getThemePath(e,this.sTheme)+"css_variables.css"+(r?r:"");Log.info("Including "+u+" -  sap.ui.core.Core.includeLibraryTheme()");includeStylesheet(u,s);s="sap-ui-themeskeleton-"+a;fnAddFoucmarker(s)}u=this._getThemePath(e,this.sTheme)+i+".css"+(r?r:"");Log.info("Including "+u+" -  sap.ui.core.Core.includeLibraryTheme()");includeStylesheet(u,s);var d=sap.ui.require("sap/ui/core/theming/Parameters");if(d){d._addLibraryTheme(a)}}};Core.prototype._getLibraryCssQueryParams=function(e){var t;if(this.oConfiguration["versionedLibCss"]&&e){t="?version="+e.version;if(Global.versioninfo){t+="&sap-ui-dist-version="+Global.versioninfo.version}}return t};Core.prototype.getLoadedLibraries=function(){return Object.assign({},this.mLibraries)};Core.prototype.getLibraryResourceBundle=function(e,t,r){var o,n,i,a;if(typeof e==="boolean"){r=e;e=undefined;t=undefined}if(typeof t==="boolean"){r=t;t=undefined}function s(e){if(e==null||e===true){return{bundleUrl:"messagebundle.properties"}}if(typeof e==="string"){return{bundleUrl:e}}if(typeof e==="object"){return e}}assert(e===undefined&&t===undefined||typeof e==="string","sLibraryName must be a string or there is no argument given at all");assert(t===undefined||typeof t==="string","sLocale must be a string or omitted");e=e||"sap.ui.core";t=t||this.getConfiguration().getLanguage();n=e+"/"+t;i=this.mResourceBundles[n];if(!i||!r&&i instanceof Promise){o=getManifest(e);if(o&&Version(o._version).compareTo("1.9.0")>=0){a=o["sap.ui5"]&&o["sap.ui5"].library&&o["sap.ui5"].library.i18n}a=s(a);if(a){i=ResourceBundle.create({url:getModulePath(e+"/",a.bundleUrl),supportedLocales:a.supportedLocales,fallbackLocale:a.fallbackLocale,locale:t,async:r});if(i instanceof Promise){i=i.then(function(e){this.mResourceBundles[n]=e;return e}.bind(this))}this.mResourceBundles[n]=i}}return r?Promise.resolve(i):i};Core.prototype.setRoot=function(e,t){assert(typeof e==="string"||typeof e==="object","oDomRef must be a string or object");assert(t instanceof Interface||t instanceof Control,"oControl must be a Control or Interface");if(t){t.placeAt(e,"only")}};Core.prototype.createUIArea=function(e){var t=this;assert(typeof e==="string"||typeof e==="object","oDomRef must be a string or object");if(!e){throw new Error("oDomRef must not be null")}if(typeof e==="string"){var r=e;if(r==STATIC_UIAREA_ID){e=this.getStaticAreaRef()}else{e=e?document.getElementById(e):null;if(!e){throw new Error("DOM element with ID '"+r+"' not found in page, but application tries to insert content.")}}}if(!e.id||e.id.length==0){e.id=uid()}var o=e.id;if(!this.mUIAreas[o]){this.mUIAreas[o]=new UIArea(this,e);if(!isEmptyObject(this.oModels)){var n={oModels:Object.assign({},this.oModels),oBindingContexts:{},aPropagationListeners:[]};t.mUIAreas[o]._propagateProperties(true,t.mUIAreas[o],n,true)}}else{this.mUIAreas[o].setRootNode(e)}return this.mUIAreas[o]};Core.prototype.getUIArea=function(e){assert(typeof e==="string"||typeof e==="object","o must be a string or object");var t="";if(typeof e=="string"){t=e}else{t=e.id}if(t){return this.mUIAreas[t]}return null};Core.prototype.addInvalidatedUIArea=function(e){if(!this._sRerenderTimer){oRenderLog.debug("Registering timer for delayed re-rendering");Core.aFnDone.push(Interaction.notifyAsyncStep());this._sRerenderTimer=setTimeout(this["renderPendingUIUpdates"].bind(this),0)}};Core.MAX_RENDERING_ITERATIONS=20;Core.prototype.renderPendingUIUpdates=function(e){oRenderLog.debug("Render pending UI updates: start ("+(e||"by timer")+")");Measurement.start("renderPendingUIUpdates","Render pending UI updates in all UIAreas");var t=false,r=Core.MAX_RENDERING_ITERATIONS>0,o=0;this._bRendering=true;do{if(r){o++;if(o>Core.MAX_RENDERING_ITERATIONS){this._bRendering=false;throw new Error("Rendering has been re-started too many times ("+o+"). Add URL parameter sap-ui-xx-debugRendering=true for a detailed analysis.")}if(o>1){oRenderLog.debug("Render pending UI updates: iteration "+o)}}if(this._sRerenderTimer){if(this._sRerenderTimer!==this){clearTimeout(this._sRerenderTimer)}this._sRerenderTimer=undefined;if(Core.aFnDone.length>0){Core.aFnDone.pop()()}}this.runPrerenderingTasks();var n=this.mUIAreas;for(var i in n){t=n[i].rerender()||t}}while(r&&this._sRerenderTimer);this._bRendering=false;if(t){this.fireUIUpdated()}oRenderLog.debug("Render pending UI updates: finished");Measurement.end("renderPendingUIUpdates")};Core.prototype.getUIDirty=function(){return!!(this._sRerenderTimer||this._bRendering)};Core.prototype.attachUIUpdated=function(e,t){_oEventProvider.attachEvent(Core.M_EVENTS.UIUpdated,e,t)};Core.prototype.detachUIUpdated=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.UIUpdated,e,t)};Core.prototype.fireUIUpdated=function(e){_oEventProvider.fireEvent(Core.M_EVENTS.UIUpdated,e)};Core.prototype.notifyContentDensityChanged=function(){this.fireThemeChanged()};Core.prototype.attachThemeChanged=function(e,t){_oEventProvider.attachEvent(Core.M_EVENTS.ThemeChanged,e,t)};Core.prototype.detachThemeChanged=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.ThemeChanged,e,t)};Core.prototype.fireThemeChanged=function(e){getScrollbarSize(true);var t=sap.ui.require("sap/ui/core/theming/Parameters");if(t){t.reset(true)}e=e||{};if(!e.theme){e.theme=this.getConfiguration().getTheme()}var r=Core.M_EVENTS.ThemeChanged;var o=jQuery.Event(r);o.theme=e.theme;Element.registry.forEach(function(e){e._handleEvent(o)});ActivityDetection.refresh();_oEventProvider.fireEvent(r,e)};Core.prototype.attachThemeScopingChanged=function(e,t){_oEventProvider.attachEvent(Core.M_EVENTS.ThemeScopingChanged,e,t)};Core.prototype.detachThemeScopingChanged=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.ThemeScopingChanged,e,t)};Core.prototype.fireThemeScopingChanged=function(e){_oEventProvider.fireEvent(Core.M_EVENTS.ThemeScopingChanged,e)};Core.prototype.attachLocalizationChanged=function(e,t){_oEventProvider.attachEvent(Core.M_EVENTS.LocalizationChanged,e,t)};Core.prototype.detachLocalizationChanged=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.LocalizationChanged,e,t)};Core.prototype.fireLocalizationChanged=function(e){var t=Core.M_EVENTS.LocalizationChanged,r=jQuery.Event(t,{changes:e}),o=ManagedObject._handleLocalizationChange;Log.info("localization settings changed: "+Object.keys(e).join(","),null,"sap.ui.core.Core");each(this.oModels,function(e,t){if(t&&t._handleLocalizationChange){t._handleLocalizationChange()}});function n(e){each(this.mUIAreas,function(t,r){o.call(r,e)});Component.registry.forEach(function(t){o.call(t,e)});Element.registry.forEach(function(t){o.call(t,e)})}n.call(this,1);n.call(this,2);if(e.rtl!=undefined){document.documentElement.setAttribute("dir",e.rtl?"rtl":"ltr");this._updateThemeUrls(this.sTheme);each(this.mUIAreas,function(e,t){t.invalidate()});Log.info("RTL mode "+e.rtl?"activated":"deactivated")}Element.registry.forEach(function(e){e._handleEvent(r)});_oEventProvider.fireEvent(t,{changes:e})};Core.prototype.attachLibraryChanged=function(e,t){_oEventProvider.attachEvent(Core.M_EVENTS.LibraryChanged,e,t)};Core.prototype.detachLibraryChanged=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.LibraryChanged,e,t)};Core.prototype.fireLibraryChanged=function(e){_oEventProvider.fireEvent(Core.M_EVENTS.LibraryChanged,e)};Core.prototype.applyChanges=function(){this.renderPendingUIUpdates("forced by applyChanges")};Core.prototype.registerElementClass=function(e){var t=e.getName(),r=e.getLibraryName()||"",o=this.mLibraries[r],n=Control.prototype.isPrototypeOf(e.getClass().prototype)?"controls":"elements";if(!o){ObjectPath.create(r);o=this.mLibraries[r]={name:r,dependencies:[],types:[],interfaces:[],controls:[],elements:[]}}if(o[n].indexOf(t)<0){o[n].push(t);Log.debug("Class "+e.getName()+" registered for library "+e.getLibraryName());this.fireLibraryChanged({name:e.getName(),stereotype:e.getStereotype(),operation:"add",metadata:e})}};Core.prototype.registerObject=function(e){var t=e.getId(),r=e.getMetadata().getStereotype(),o=this.getObject(r,t);if(o&&o!==e){Log.error('adding object "'+r+"\" with duplicate id '"+t+"'");throw new Error('Error: adding object "'+r+"\" with duplicate id '"+t+"'")}this.mObjects[r][t]=e};Core.prototype.deregisterObject=function(e){var t=e.getId(),r=e.getMetadata().getStereotype();delete this.mObjects[r][t]};Core.prototype.byId=Element.registry.get;Core.prototype.getControl=Element.registry.get;Core.prototype.getElementById=Element.registry.get;Core.prototype.getObject=function(e,t){assert(t==null||typeof t==="string","sId must be a string when defined");assert(this.mObjects[e]!==undefined,"sType must be a supported stereotype");return t==null?undefined:this.mObjects[e]&&this.mObjects[e][t]};Core.prototype.getComponent=Component.registry.get;Core.prototype.getTemplate=function(e){Log.warning("Synchronous loading of 'sap/ui/core/tmpl/Template'. Use 'sap/ui/core/tmpl/Template' module and"+" call Template.byId instead","SyncXHR",null,function(){return{type:"SyncXHR",name:"Core.prototype.getTemplate"}});var t=sap.ui.requireSync("sap/ui/core/tmpl/Template");return t.byId(e)};Core.prototype.getStaticAreaRef=function(){var e=STATIC_UIAREA_ID?document.getElementById(STATIC_UIAREA_ID):null,t,r;if(!e){e=document.createElement("div");r=document.createElement("span");t=this.getConfiguration();if(!this.bDomReady){throw new Error("DOM is not ready yet. Static UIArea cannot be created.")}e.setAttribute("id",STATIC_UIAREA_ID);Object.assign(e.style,{height:"0",width:"0",overflow:"hidden",float:t.getRTL()?"right":"left"});r.setAttribute("id",STATIC_UIAREA_ID+"-firstfe");r.setAttribute("tabindex",-1);r.style.fontSize=0;e.appendChild(r);document.body.insertBefore(e,document.body.firstChild);this.createUIArea(e).bInitial=false}return e};Core.prototype.isStaticAreaRef=function(e){return e&&e.id===STATIC_UIAREA_ID};var oIntervalTrigger;Core.prototype.attachIntervalTimer=function(e,t){if(!oIntervalTrigger){oIntervalTrigger=sap.ui.requireSync("sap/ui/core/IntervalTrigger")}oIntervalTrigger.addListener(e,t)};Core.prototype.detachIntervalTimer=function(e,t){if(oIntervalTrigger){oIntervalTrigger.removeListener(e,t)}};Core.prototype.attachControlEvent=function(e,t){_oEventProvider.attachEvent(Core.M_EVENTS.ControlEvent,e,t)};Core.prototype.detachControlEvent=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.ControlEvent,e,t)};Core.prototype.fireControlEvent=function(e){_oEventProvider.fireEvent(Core.M_EVENTS.ControlEvent,e)};Core.prototype._handleControlEvent=function(e,t){var r=jQuery.Event(e.type);Object.assign(r,e);r.originalEvent=undefined;this.fireControlEvent({browserEvent:r,uiArea:t})};Core.prototype.getApplication=function(){return sap.ui.getApplication&&sap.ui.getApplication()};Core.prototype.registerPlugin=function(e){assert(typeof e==="object","oPlugin must be an object");if(!e){return}for(var t=0,r=this.aPlugins.length;t<r;t++){if(this.aPlugins[t]===e){return}}this.aPlugins.push(e);if(this.bInitialized&&e&&e.startPlugin){e.startPlugin(this)}};Core.prototype.unregisterPlugin=function(e){assert(typeof e==="object","oPlugin must be an object");if(!e){return}var t=-1;for(var r=this.aPlugins.length;r--;r>=0){if(this.aPlugins[r]===e){t=r;break}}if(t==-1){return}if(this.bInitialized&&e&&e.stopPlugin){e.stopPlugin(this)}this.aPlugins.splice(t,1)};Core.prototype.startPlugins=function(){for(var e=0,t=this.aPlugins.length;e<t;e++){var r=this.aPlugins[e];if(r&&r.startPlugin){r.startPlugin(this,true)}}};Core.prototype.stopPlugins=function(){for(var e=0,t=this.aPlugins.length;e<t;e++){var r=this.aPlugins[e];if(r&&r.stopPlugin){r.stopPlugin(this)}}};Core.prototype.setModel=function(e,t){assert(e==null||BaseObject.isA(e,"sap.ui.model.Model"),"oModel must be an instance of sap.ui.model.Model, null or undefined");assert(t===undefined||typeof t==="string"&&!/^(undefined|null)?$/.test(t),"sName must be a string or omitted");var r=this,o;if(!e&&this.oModels[t]){delete this.oModels[t];if(isEmptyObject(r.oModels)&&isEmptyObject(r.oBindingContexts)){o=ManagedObject._oEmptyPropagatedProperties}else{o={oModels:Object.assign({},r.oModels),oBindingContexts:{},aPropagationListeners:[]}}each(this.mUIAreas,function(r,n){if(e!=n.getModel(t)){n._propagateProperties(t,n,o,false,t)}})}else if(e&&e!==this.oModels[t]){this.oModels[t]=e;each(this.mUIAreas,function(r,o){if(e!=o.getModel(t)){var n={oModels:Object.assign({},this.oModels),oBindingContexts:{},aPropagationListeners:[]};o._propagateProperties(t,o,n,false,t)}}.bind(this))}return this};Core.prototype.setMessageManager=function(e){this.oMessageManager=e};Core.prototype.getMessageManager=function(){if(!this.oMessageManager){this.oMessageManager=new MessageManager}return this.oMessageManager};Core.prototype.byFieldGroupId=function(e){return Element.registry.filter(function(t){return t instanceof Control&&t.checkFieldGroupIds(e)})};Core.prototype.getModel=function(e){assert(e===undefined||typeof e==="string"&&!/^(undefined|null)?$/.test(e),"sName must be a string or omitted");return this.oModels[e]};Core.prototype.hasModel=function(){return!isEmptyObject(this.oModels)};Core.prototype.getEventBus=function(){if(!this.oEventBus){var e=sap.ui.require("sap/ui/core/EventBus");if(!e){Log.warning("Synchronous loading of EventBus. Ensure that 'sap/ui/core/EventBus' module is loaded"+" before this function is called.","SyncXHR",null,function(){return{type:"SyncXHR",name:"core-eventbus"}});e=sap.ui.requireSync("sap/ui/core/EventBus")}var t=this.oEventBus=new e;this._preserveHandler=function(e){t.publish("sap.ui","__preserveContent",{domNode:e.domNode})};RenderManager.attachPreserveContent(this._preserveHandler)}return this.oEventBus};Core.prototype.attachValidationError=function(e,t,r){if(typeof e==="function"){r=t;t=e;e=undefined}_oEventProvider.attachEvent(Core.M_EVENTS.ValidationError,e,t,r);return this};Core.prototype.detachValidationError=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.ValidationError,e,t);return this};Core.prototype.attachParseError=function(e,t,r){if(typeof e==="function"){r=t;t=e;e=undefined}_oEventProvider.attachEvent(Core.M_EVENTS.ParseError,e,t,r);return this};Core.prototype.detachParseError=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.ParseError,e,t);return this};Core.prototype.attachFormatError=function(e,t,r){if(typeof e==="function"){r=t;t=e;e=undefined}_oEventProvider.attachEvent(Core.M_EVENTS.FormatError,e,t,r);return this};Core.prototype.detachFormatError=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.FormatError,e,t);return this};Core.prototype.attachValidationSuccess=function(e,t,r){if(typeof e==="function"){r=t;t=e;e=undefined}_oEventProvider.attachEvent(Core.M_EVENTS.ValidationSuccess,e,t,r);return this};Core.prototype.detachValidationSuccess=function(e,t){_oEventProvider.detachEvent(Core.M_EVENTS.ValidationSuccess,e,t);return this};Core.prototype.fireParseError=function(e){_oEventProvider.fireEvent(Core.M_EVENTS.ParseError,e);return this};Core.prototype.fireValidationError=function(e){_oEventProvider.fireEvent(Core.M_EVENTS.ValidationError,e);return this};Core.prototype.fireFormatError=function(e){_oEventProvider.fireEvent(Core.M_EVENTS.FormatError,e);return this};Core.prototype.fireValidationSuccess=function(e){_oEventProvider.fireEvent(Core.M_EVENTS.ValidationSuccess,e);return this};Core.prototype.isMobile=function(){return Device.browser.mobile};Core.prototype._getEventProvider=function(){return _oEventProvider};Core.prototype.addPrerenderingTask=function(e,t){if(t){this.aPrerenderingTasks.unshift(e)}else{this.aPrerenderingTasks.push(e)}this.addInvalidatedUIArea()};Core.prototype.runPrerenderingTasks=function(){var e=this.aPrerenderingTasks.slice();this.aPrerenderingTasks=[];e.forEach(function(e){e()})};Core.prototype.destroy=function(){RenderManager.detachPreserveContent(this._preserveHandler);this.oFocusHandler.destroy();_oEventProvider.destroy();BaseObject.prototype.destroy.call(this)};sap.ui.setRoot=function(e,t){assert(typeof e==="string"||typeof e==="object","oDomRef must be a string or object");assert(t instanceof Interface||t instanceof Control,"oControl must be a Control or Interface");sap.ui.getCore().setRoot(e,t)};return(new Core).getInterface()});