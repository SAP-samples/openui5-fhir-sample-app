/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/library","sap/base/Log"],function(e,t){"use strict";var a=e.ValueState;var i=function(){this.refreshDataState=s;this.fnDestroy=this.destroy;this.destroy=n};function s(e,i){if(i.getChanges().messages&&this.getBinding(e)&&this.getBinding(e).isA("sap.ui.model.PropertyBinding")){var s=i.getMessages();var n=sap.ui.core.LabelEnablement.getReferencingLabels(this);var r=n[0];var g=false;s.forEach(function(e){if(n&&n.length>0){var a=sap.ui.getCore().byId(r);if(a.getMetadata().isInstanceOf("sap.ui.core.Label")&&a.getText&&e.getAdditionalText()!==a.getText()){e.setAdditionalText(a.getText());g=true}else{t.warning("sap.ui.core.message.Message: Can't create labelText."+"Label with id "+r+" is no valid sap.ui.core.Label.",this)}}if(e.getControlId()!==this.getId()){e.addControlId(this.getId());g=true}}.bind(this));var o=sap.ui.getCore().getMessageManager().getMessageModel();o.checkUpdate(g,true);if(s&&s.length>0){var d=s[0];if(a[d.type]){this.setValueState(d.type);this.setValueStateText(d.message)}}else{this.setValueState(a.None);this.setValueStateText("")}}}function n(){var e=this.getId();function t(t){t.removeControlId(e)}for(var a in this.mBindingInfos){var i=this.mBindingInfos[a];if(i.binding){var s=i.binding.getDataState();var n=s.getMessages();n.forEach(t)}}this.fnDestroy.apply(this,arguments)}return i},true);