/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/PlanningCalendarRow","sap/m/Button","sap/ui/core/date/UniversalDate"],function(t,e,i){"use strict";var n=t.extend("sap.f.PlanningCalendarInCardRow",{metadata:{library:"sap.m",properties:{visibleAppointmentsCount:{type:"int",group:"Data",defaultValue:2}}}});n.prototype.exit=function(){t.prototype.exit.call(this,arguments);if(this._oMoreAppsButton){this._oMoreAppsButton.destroy();this._oMoreAppsButton=null}};n.prototype._calculateVisibleAppointments=function(t,e){var n=new i,o=new i(n.getFullYear(),n.getMonth(),n.getDate()),s=i.getInstance(new Date(t[0].getStartDate().getFullYear(),t[0].getStartDate().getMonth(),t[0].getStartDate().getDate())),a=o.getTime()===s.getTime(),r=e.length,l=this.getVisibleAppointmentsCount(),p,u,g;if(a){for(var f=0;f<r;f++){if(e[f].appointment.getEndDate().getTime()>n.getTime()){p=f;break}}if(p===undefined){u=0;g=0;this._getMoreButton().setVisible(false)}else if(p+l>r){if(p<=l&&r-l<=0){u=0}else{u=r-l}g=r;this._getMoreButton().setVisible(false)}else if(r-p<=l){u=r-l;g=r;this._getMoreButton().setVisible(false)}else{u=p;g=p+l;this._getMoreButton().setVisible(true)}}else{u=0;if(r<=l){g=r;this._getMoreButton().setVisible(false)}else{g=l;this._getMoreButton().setVisible(true)}}return{iStart:u,iEnd:g}};n.prototype._getMoreButton=function(){if(!this._oMoreAppsButton){this._oMoreAppsButton=new e({text:"More"})}return this._oMoreAppsButton};return n});