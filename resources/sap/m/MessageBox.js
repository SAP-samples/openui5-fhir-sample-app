/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./Button","./Dialog","./Text","./FormattedText","./Link","./VBox","sap/ui/core/IconPool","sap/ui/core/ElementMetadata","sap/ui/core/library","sap/ui/core/Control","sap/m/library","sap/ui/thirdparty/jquery","sap/ui/core/theming/Parameters"],function(e,t,i,n,s,o,a,l,r,c,u,d,f){"use strict";var g=u.DialogType;var O=u.DialogRoleType;var p=r.TextDirection;var I=u.ButtonType;var S={};S.Action={OK:"OK",CANCEL:"CANCEL",YES:"YES",NO:"NO",ABORT:"ABORT",RETRY:"RETRY",IGNORE:"IGNORE",CLOSE:"CLOSE",DELETE:"DELETE"};S.Icon={NONE:undefined,INFORMATION:"INFORMATION",WARNING:"WARNING",ERROR:"ERROR",SUCCESS:"SUCCESS",QUESTION:"QUESTION"};(function(){var r=S.Action,u=S.Icon;var T=function(){if(S._rb!==sap.ui.getCore().getLibraryResourceBundle("sap.m")){S._rb=sap.ui.getCore().getLibraryResourceBundle("sap.m")}};S.show=function(C,R){var E,N,x,y=null,A=[],h,M,m,_,B,L,b,v={id:l.uid("mbox"),initialFocus:null,textDirection:p.Inherit,verticalScrolling:true,horizontalScrolling:true,details:"",contentWidth:null},F=f.get("_sap_m_Message_Box_Information_Icon")==="true",w=F?"message-information":"hint",G={INFORMATION:"sapMMessageBoxInfo",WARNING:"sapMMessageBoxWarning",ERROR:"sapMMessageBoxError",SUCCESS:"sapMMessageBoxSuccess",QUESTION:"sapMMessageBoxQuestion",STANDARD:"sapMMessageBoxStandard"},K={INFORMATION:a.getIconURI(w),WARNING:a.getIconURI("message-warning"),ERROR:a.getIconURI("message-error"),SUCCESS:a.getIconURI("message-success"),QUESTION:a.getIconURI("question-mark")};T();if(typeof R==="string"||arguments.length>2){M=arguments[1];m=arguments[2];_=arguments[3];B=arguments[4];L=arguments[5];b=arguments[6];R={icon:M,title:m,actions:_,onClose:B,id:L,styleClass:b}}if(R&&R.hasOwnProperty("details")){v.icon=u.INFORMATION;v.emphasizedAction=r.OK;v.actions=[r.OK,r.CANCEL];R=d.extend({},v,R)}R=d.extend({},v,R);if(typeof R.actions!=="undefined"&&!Array.isArray(R.actions)){if(R.emphasizedAction!==null){R.emphasizedAction=R.actions}R.actions=[R.actions]}if(!R.actions||R.actions.length===0){R.emphasizedAction=r.OK;R.actions=[r.OK]}function D(t,i){var n;if(S.Action.hasOwnProperty(t)){n=S._rb.getText("MSGBOX_"+t)}var s=new e({id:l.uid("mbox-btn-"),text:n||t,type:i,press:function(){y=t;E.close()}});return s}var U;for(h=0;h<R.actions.length;h++){U=R.emphasizedAction===R.actions[h]?I.Emphasized:I.Default;A.push(D(R.actions[h],U))}function z(e,t){var i,a,l=new o({items:[t]});if(!e.details){return l}if(typeof e.details=="object"){e.details="<pre>"+JSON.stringify(e.details,null,"\t").replace(/{/gi,"\\{")+"</pre>"}i=(new n).setVisible(false).setHtmlText(e.details);a=new s({text:S._rb.getText("MSGBOX_LINK_TITLE"),press:function(){var e=E.getInitialFocus();E.addAriaLabelledBy(i);i.setVisible(true);a.setVisible(false);E._setInitialFocus();if(!e||e===a.getId()){A[0].focus()}}});a.addStyleClass("sapMMessageBoxLinkText");i.addStyleClass("sapMMessageBoxDetails");l.addItem(a);l.addItem(i);return l}function W(){if(typeof R.onClose==="function"){R.onClose(y)}E.detachAfterClose(W);E.destroy()}function X(){var e=0;var t=null;if(R.initialFocus){if(R.initialFocus instanceof c){t=R.initialFocus}if(typeof R.initialFocus==="string"){for(e=0;e<A.length;e++){if(S.Action.hasOwnProperty(R.initialFocus)){if(S._rb.getText("MSGBOX_"+R.initialFocus).toLowerCase()===A[e].getText().toLowerCase()){t=A[e];break}}else{if(R.initialFocus.toLowerCase()===A[e].getText().toLowerCase()){t=A[e];break}}}}}return t}if(typeof C==="string"){x=new i({textDirection:R.textDirection}).setText(C).addStyleClass("sapMMsgBoxText");N=x}else if(C instanceof c){x=C.addStyleClass("sapMMsgBoxText")}if(R&&R.hasOwnProperty("details")&&R.details!==""){x=z(R,x)}E=new t({id:R.id,type:g.Message,title:R.title,content:x,icon:K[R.icon],initialFocus:X(),verticalScrolling:R.verticalScrolling,horizontalScrolling:R.horizontalScrolling,afterClose:W,buttons:A,ariaLabelledBy:N?N.getId():undefined,contentWidth:R.contentWidth,closeOnNavigation:R.closeOnNavigation}).addStyleClass("sapMMessageBox");E.setProperty("role",O.AlertDialog);if(G[R.icon]){E.addStyleClass(G[R.icon])}else{E.addStyleClass(G.STANDARD)}if(R.styleClass){E.addStyleClass(R.styleClass)}E.open()};S.alert=function(e,t){T();var i={icon:u.NONE,title:S._rb.getText("MSGBOX_TITLE_ALERT"),emphasizedAction:t&&t.actions?null:r.OK,actions:r.OK,id:l.uid("alert"),initialFocus:null},n,s,o,a;if(typeof t==="function"||arguments.length>2){n=arguments[1];s=arguments[2];o=arguments[3];a=arguments[4];t={onClose:n,title:s,id:o,styleClass:a}}t=d.extend({},i,t);return S.show(e,t)};S.confirm=function(e,t){T();var i={icon:u.QUESTION,title:S._rb.getText("MSGBOX_TITLE_CONFIRM"),emphasizedAction:t&&t.actions?null:r.OK,actions:[r.OK,r.CANCEL],id:l.uid("confirm"),initialFocus:null},n,s,o,a;if(typeof t==="function"||arguments.length>2){n=arguments[1];s=arguments[2];o=arguments[3];a=arguments[4];t={onClose:n,title:s,id:o,styleClass:a}}t=d.extend({},i,t);return S.show(e,t)};S.error=function(e,t){T();var i={icon:u.ERROR,title:S._rb.getText("MSGBOX_TITLE_ERROR"),emphasizedAction:null,actions:r.CLOSE,id:l.uid("error"),initialFocus:null};t=d.extend({},i,t);return S.show(e,t)};S.information=function(e,t){T();var i={icon:u.INFORMATION,title:S._rb.getText("MSGBOX_TITLE_INFO"),emphasizedAction:t&&t.actions?null:r.OK,actions:r.OK,id:l.uid("info"),initialFocus:null};t=d.extend({},i,t);return S.show(e,t)};S.warning=function(e,t){T();var i={icon:u.WARNING,title:S._rb.getText("MSGBOX_TITLE_WARNING"),emphasizedAction:t&&t.actions?null:r.OK,actions:r.OK,id:l.uid("warning"),initialFocus:null};t=d.extend({},i,t);return S.show(e,t)};S.success=function(e,t){T();var i={icon:u.SUCCESS,title:S._rb.getText("MSGBOX_TITLE_SUCCESS"),emphasizedAction:t&&t.actions?null:r.OK,actions:r.OK,id:l.uid("success"),initialFocus:null};t=d.extend({},i,t);return S.show(e,t)}})();return S},true);