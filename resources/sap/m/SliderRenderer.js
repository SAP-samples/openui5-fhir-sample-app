/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./SliderUtilities","sap/ui/core/InvisibleText"],function(e,t){"use strict";var a={apiVersion:2};a.CSS_CLASS="sapMSlider";a.render=function(e,t){var i=t.getEnabled(),n=t.getTooltip_AsString(),r=a.CSS_CLASS,s=t.getAriaLabelledBy().reduce(function(e,t){return e+" "+t},"");e.openStart("div",t);this.addClass(e,t);if(!i){e.class(r+"Disabled")}e.style("width",t.getWidth());if(n&&t.getShowHandleTooltip()){e.attr("title",t._formatValueByCustomElement(n))}e.openEnd();e.openStart("div",t.getId()+"-inner");this.addInnerClass(e,t);if(!i){e.class(r+"InnerDisabled")}e.openEnd();if(t.getProgress()){this.renderProgressIndicator(e,t,s)}this.renderHandles(e,t,s);e.close("div");if(t.getEnableTickmarks()){this.renderTickmarks(e,t)}this.renderLabels(e,t);if(t.getName()){this.renderInput(e,t)}e.close("div")};a.renderProgressIndicator=function(e,t){e.openStart("div",t.getId()+"-progress");this.addProgressIndicatorClass(e,t);e.style("width",t._sProgressValue);e.attr("aria-hidden","true");e.openEnd().close("div")};a.renderHandles=function(e,t,a){this.renderHandle(e,t,{id:t.getId()+"-handle",forwardedLabels:a})};a.renderHandle=function(e,a,i){var n=a.getEnabled();e.openStart("span");if(i&&i.id!==undefined){e.attr("id",i.id)}if(a.getShowHandleTooltip()&&!a.getShowAdvancedTooltip()){this.writeHandleTooltip(e,a)}if(a.getInputsAsTooltips()){e.attr("aria-describedby",t.getStaticId("sap.m","SLIDER_INPUT_TOOLTIP"))}this.addHandleClass(e,a);e.style(sap.ui.getCore().getConfiguration().getRTL()?"right":"left",a._sProgressValue);this.writeAccessibilityState(e,a,i);if(n){e.attr("tabindex","0")}e.openEnd().close("span")};a.writeHandleTooltip=function(e,t){e.attr("title",t._formatValueByCustomElement(t.toFixed(t.getValue())))};a.renderInput=function(e,t){e.voidStart("input",t.getId()+"-input").attr("type","text");e.class(a.CSS_CLASS+"Input");if(!t.getEnabled()){e.attr("disabled")}e.attr("name",t.getName());e.attr("value",t._formatValueByCustomElement(t.toFixed(t.getValue())));e.voidEnd()};a.writeAccessibilityState=function(e,t,a){var i=t.getValue(),n=t._isElementsFormatterNotNumerical(i),r=t._formatValueByCustomElement(i),s;if(t._getUsedScale()&&!n){s=r}else{s=t.toFixed(i)}e.accessibilityState(t,{role:"slider",orientation:"horizontal",valuemin:t.toFixed(t.getMin()),valuemax:t.toFixed(t.getMax()),valuenow:s,labelledby:{value:(a.forwardedLabels+" "+t.getAggregation("_handlesLabels")[0].getId()).trim()}});if(n){e.accessibilityState(t,{valuetext:r})}};a.renderTickmarks=function(t,i){var n,r,s,l,d,o,c,S,g=i._getUsedScale();if(!i.getEnableTickmarks()||!g){return}o=Math.abs(i.getMin()-i.getMax());c=i.getStep();l=g.getTickmarksBetweenLabels();r=g.calcNumberOfTickmarks(o,c,e.CONSTANTS.TICKMARKS.MAX_POSSIBLE);s=i._getPercentOfValue(this._calcTickmarksDistance(r,i.getMin(),i.getMax(),c));t.openStart("ul").class(a.CSS_CLASS+"Tickmarks").openEnd();this.renderTickmarksLabel(t,i,i.getMin());t.openStart("li").class(a.CSS_CLASS+"Tick").style("width",s+"%;").openEnd().close("li");for(n=1;n<r-1;n++){S=false;if(l&&n%l===0){S=true;d=n*s;this.renderTickmarksLabel(t,i,i._getValueOfPercent(d))}t.openStart("li").class(a.CSS_CLASS+"Tick").style("width",s+"%"+(S?" opacity: 0;":"")).openEnd().close("li")}this.renderTickmarksLabel(t,i,i.getMax());t.openStart("li").class(a.CSS_CLASS+"Tick").style("width","0").openEnd().close("li");t.close("ul")};a.renderTickmarksLabel=function(e,t,i){var n=t._getPercentOfValue(i);var r=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var s;i=t.toFixed(i,t.getDecimalPrecisionOfNumber(t.getStep()));s=t._formatValueByCustomElement(i,"scale");e.openStart("li").class(a.CSS_CLASS+"TickLabel").style(r,n+"%").openEnd();e.openStart("div").class(a.CSS_CLASS+"Label").openEnd().text(s).close("div");e.close("li")};a._calcTickmarksDistance=function(e,t,a,i){var n=Math.abs(t-a),r=Math.floor(n/i),s=Math.ceil(r/e);return t+s*i};a.addClass=function(e,t){e.class(a.CSS_CLASS)};a.addInnerClass=function(e,t){e.class(a.CSS_CLASS+"Inner")};a.addProgressIndicatorClass=function(e,t){e.class(a.CSS_CLASS+"Progress")};a.addHandleClass=function(e,t){e.class(a.CSS_CLASS+"Handle")};a.renderLabels=function(e,t){t.getAggregation("_handlesLabels").forEach(e.renderControl,e)};return a},true);