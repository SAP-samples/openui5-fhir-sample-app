/*!
	* OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
	*/
sap.ui.define(["sap/ui/fl/changeHandler/MoveControls","sap/ui/core/Core","sap/base/util/merge","sap/ui/thirdparty/jquery"],function(e,r,t,n){"use strict";var a=n.extend({},e);a.applyChange=function(r,t,n){var a=n.modifier.targets==="jsControlTree";if(a){t._suppressScroll()}var o=e.applyChange.call(this,r,t,n);if(a){t.attachEventOnce("onAfterRenderingDOMReady",function(){t._resumeScroll(false)})}return o};a.revertChange=function(r,t,n){var a=n.modifier.targets==="jsControlTree";if(a){t._suppressScroll()}var o=e.revertChange.call(this,r,t,n);if(a){t.attachEventOnce("onAfterRenderingDOMReady",function(){t._resumeScroll(false)})}return o};a.completeChangeContent=function(t,n,a){var o=r.byId(n.source.id),i=r.byId(n.target.id);if(o.isA("sap.uxap.AnchorBar")&&i.isA("sap.uxap.AnchorBar")){this._mapAnchorsToSections(n,a)}return e.completeChangeContent.apply(this,arguments)};a._mapAnchorsToSections=function(e,n){var a,o,i=n.modifier,s=i.bySelector(e.selector,n.appComponent,n.view),c=s._getVisibleSections();function g(e){var t=r.byId(e),n=t.data("sectionId");return r.byId(n)}e.movedElements.forEach(function(e){var r=c[e.targetIndex];e.targetIndex=i.findIndexInParentAggregation(r);a=g(e.id);if(!a||!a.getParent()){throw new Error("Cannot map anchor to section")}o={id:a.getParent().getId(),aggregation:a.sParentAggregationName};e.id=a.getId()});t(e.source,o);t(e.target,o)};return a},true);