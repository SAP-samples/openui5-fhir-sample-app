/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Utils","sap/base/Log","sap/ui/fl/changeHandler/BaseRename"],function(e,t,r){"use strict";var n={propertyName:"title",changePropertyName:"newText",translationTextType:"XGRP"};var a=r.createRenameChangeHandler(n);a._getControlForRename=function(e,t){var r=t.getAggregation(e,"subSections");if(r&&r.length===1&&t.getPropertyBindingOrProperty(r[0],"title")&&t.getProperty(t.getParent(e),"subSectionLayout")==="TitleOnTop"){return r[0]}return e};a.applyChange=function(e,r,o){var i=o.modifier,p=n.propertyName,g=e.getDefinition(),s=g.texts[n.changePropertyName],l=s.value,f=a._getControlForRename(r,i);if(typeof l==="string"&&l.trim()===""){throw new Error("Change cannot be applied as ObjectPageSubSection's title cannot be empty: ["+g.layer+"]"+g.namespace+"/"+g.fileName+"."+g.fileType)}if(g.texts&&s&&typeof l==="string"){e.setRevertData(i.getPropertyBindingOrProperty(f,p));i.setPropertyBindingOrProperty(f,p,l);return true}else{t.error("Change does not contain sufficient information to be applied: ["+g.layer+"]"+g.namespace+"/"+g.fileName+"."+g.fileType)}};a.revertChange=function(e,r,o){var i=e.getRevertData(),p=o.modifier,g=a._getControlForRename(r,p),s=n.propertyName;if(i||i===""){p.setPropertyBindingOrProperty(g,s,i);e.resetRevertData();return true}else{t.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.")}};return a},true);