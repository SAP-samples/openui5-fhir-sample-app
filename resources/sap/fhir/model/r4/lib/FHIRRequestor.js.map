{"version":3,"file":"FHIRRequestor.js","names":["sap","ui","define","jQuery","FHIRUtils","SubmitMode","FHIRBundle","FHIRBundleEntry","FHIRBundleRequest","FHIRBundleType","RequestHandle","HTTPMethod","FHIRUrl","each","merge","FHIROperationOutcome","FHIRRequestor","sServiceUrl","oModel","bCSRF","sPrefer","oDefaultQueryParams","this","_mBundleQueue","_sServiceUrl","_aPendingRequestHandles","_oRegex","rAmpersand","rEquals","rHash","rPlus","prototype","submitBundle","sGroupId","fnSuccessPromise","fnErrorPromise","oFHIRBundle","_sendBundle","_request","sMethod","sPath","bForceDirectCall","mParameters","mHeaders","oPayload","fnSuccess","fnError","oBinding","bManualSubmit","isRequestable","undefined","oRequestHandle","_getGroupSubmitMode","Direct","_getBundleByGroup","oUri","_getGroupUri","oFHIRBundleEntry","_createBundleEntry","addBundleEntry","getRequest","abort","_sendRequest","PUT","POST","sResourcePath","oResource","charAt","slice","oBindingInfo","getBindingInfo","sRequestUrl","GET","_buildQueryParameters","sFullUrl","sETag","generateFullUrl","getResourceServerPath","getResourceId","getETag","oFHIRBundleRequest","fnSubmitSuccessBundle","fnSubmitErrorBundle","oGivenFHIRBundle","aSuccessResource","aOperationOutcome","_deleteBundleFromQueue","getGroupId","i","getNumberOfBundleEntries","getBundlyEntry","oResponse","responseJSON","entry","response","status","startsWith","resource","push","getResource","executeSuccessCallback","outcome","executeErrorCallback","length","bind","getBundleData","setBundle","oFHIRUrl","sContentType","getRelativeUrlWithoutQueryParameters","_isRequestTransformable","_getFormData","getQueryParameters","getResourceType","sQueryParameter","getRelativeUrlWithQueryParameters","getCore","getConfiguration","getLanguageTag","Prefer","fnTriggerRequest","_ajax","url","data","JSON","stringify","beforeSend","jqXHR","settings","setUrl","setData","setRequest","setHeaders","headers","aPendingRequestHandles","filterArray","getUrl","_add","fireRequestSent","_createEventParameters","type","contentType","traditional","_isCsrfTokenRequest","tmpFnSuccess","deepClone","tmpFnError","_callBackForXcsrfToken","oData","sToken","fnOriginSuccess","getResponseHeaders","ajax","isAborted","always","oGivenRequestHandle","done","_deleteRequestHandle","fireRequestCompleted","fail","fireRequestFailed","requestHandle","getGroupProperty","_getBundleTypeBySubmitMode","getBundle","sSubmitMode","Batch","Transaction","Error","aQuery","_isFormatSupported","_format","DELETE","sKey","vValue","Array","isArray","forEach","sItem","_encodePair","join","sValue","_encode","sPart","bEncodeEquals","sEncoded","encodeURI","replace","iIndex","getIndexOfValueInArray","splice","destroy","mResponseHeaders","sResponseHeaders","getAllResponseHeaders","trim","aResponseHeaders","split","sHeader","aKeyValue","getResponseHeader","sFormat","aSupportedFormats","indexOf","mQueryParameters","isSecureSearchModeEnabled","isSearchAtBaseLevel","isMetadataRequest"],"sources":["FHIRRequestor-dbg.js"],"mappings":"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"}